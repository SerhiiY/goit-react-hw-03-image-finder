(window["webpackJsonpgoit-react-hw-03-image-finder"]=window["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{23:function(e,t,a){e.exports={spinner:"style_spinner__2XbSq"}},24:function(e,t,a){},27:function(e,t,a){e.exports=a(71)},3:function(e,t,a){e.exports={photoCard:"style_photoCard__3S1xx",fullscreenButton:"style_fullscreenButton__1XQ0K",photoCardImg:"style_photoCardImg__ocg2n",stats:"style_stats__3bCkF",statsItem:"style_statsItem__W5j50"}},4:function(e,t,a){e.exports={searchForm:"style_searchForm__1mpRr"}},5:function(e,t,a){e.exports={gallery:"style_gallery___jVbn",button:"style_button__1Mx7t"}},6:function(e,t,a){e.exports={overlay:"style_overlay__2Ab_i",modal:"style_modal__3yE_2"}},71:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),l=a.n(r),s=a(7),i=a(18),c=a(19),m=a(25),u=a(20),p=a(26),d=a(21),h=a.n(d),g=a(22),y=a.n(g),f=(a(70),a(23)),_=a.n(f),w=a(4),b=a.n(w),v=function(e){var t=e.onSubmit;return o.a.createElement("form",{className:b.a.searchForm,onSubmit:t},o.a.createElement("input",{className:b.a.searchForm__input,type:"text",autoComplete:"off",placeholder:"Search images..."}))},E=a(3),S=a.n(E),N=function(e){var t=e.props,a=e.toFullView,n=t.id,r=t.webformatURL,l=t.largeImageURL,s=t.comments,i=t.downloads,c=t.likes,m=t.views;return o.a.createElement("li",{className:S.a.photoCard,key:n},o.a.createElement("img",{src:r,alt:"WebFormatImg",className:S.a.photoCardImg}),o.a.createElement("div",{className:S.a.stats},o.a.createElement("p",{className:S.a.statsItem},o.a.createElement("i",{className:"material-icons"},"thumb_up"),c),o.a.createElement("p",{className:S.a.statsItem},o.a.createElement("i",{className:"material-icons"},"visibility"),m),o.a.createElement("p",{className:S.a.statsItem},o.a.createElement("i",{className:"material-icons"},"comment"),s),o.a.createElement("p",{className:S.a.statsItem},o.a.createElement("i",{className:"material-icons"},"cloud_download"),i)),o.a.createElement("button",{type:"button",className:S.a.fullscreenButton,onClick:function(){return a(l)}},o.a.createElement("i",{className:"material-icons"},"zoom_out_map")))};N.defaultProps={id:"",webformatURL:"https://delvin.by/wp-content/uploads/2019/06/empty.png",largeImageURL:"",comments:0,downloads:0,likes:0,views:0};var F=N,k=a(5),C=a.n(k),I=function(e){var t=e.imageList,a=e.toFullView,r=e.loadMore;return o.a.createElement(n.Fragment,null,o.a.createElement("ul",{className:C.a.gallery},t.map((function(e){return o.a.createElement(F,{key:e.id,props:e,toFullView:a})}))),o.a.createElement("button",{className:C.a.button,onClick:r},"Show more"))},V=a(6),x=a.n(V),M=function(e){var t=e.imgSrc,a=e.closeModal;return o.a.createElement("div",{className:x.a.overlay,id:"overlay",onClick:function(e){"overlay"===e.target.id&&a()}},o.a.createElement("img",{className:x.a.modal,src:t,alt:"FullSizePhoto"}))};M.defaultProps={imgSrc:"https://delvin.by/wp-content/uploads/2019/06/empty.png"};var P=M,j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).abortController=new AbortController,a.state={isFullView:!1,imgSrc:"",images:[],spinner:!0,error:""},a.query="",a.per_page=12,a.page=1,a.api_key="14090322-33bc1de3434a551c0882d475d",a.handlePressKey=function(e){"Escape"===e.code&&a.setState({isFullView:!1})},a.loadMore=function(){a.page+=1,a.fetchPhotoData()},a.fetchPhotoData=function(){a.state.spinner||a.setState({spinner:!0});var e=encodeURI(a.query);h.a.get("https://pixabay.com/api/?key=".concat(a.api_key,"&q=").concat(e,"&image_type=all&per_page=").concat(a.per_page,"&page=").concat(a.page)).then((function(e){return a.setState((function(t){var a=t.images;return{images:[].concat(Object(s.a)(a),Object(s.a)(e.data.hits))}}))})).catch((function(e){return a.setState({error:e})})).finally((function(){return a.setState({spinner:!1})}))},a.onSubmit=function(e){e.preventDefault();var t=e.target.querySelector("input").value;a.query!==t&&(a.page=1,a.query=t,a.setState({images:[]}),a.fetchPhotoData())},a.toFullView=function(e){a.setState({isFullView:!0,imgSrc:e})},a.closeModal=function(){a.setState({isFullView:!1})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchPhotoData(this.query),window.addEventListener("keydown",this.handlePressKey)}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.images.length;a!==t.images.length&&a!==this.per_page&&window.scrollBy({top:640,behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handlePressKey)}},{key:"render",value:function(){var e=this.state,t=e.imgSrc,a=e.isFullView,r=e.images,l=e.spinner,s=e.error;return o.a.createElement(n.Fragment,null,o.a.createElement(v,{onSubmit:this.onSubmit}),l&&o.a.createElement(y.a,{timeout:5e3,className:_.a.spinner}),s&&o.a.createElement("h2",null,this.state.error),r[0]&&o.a.createElement(I,{imageList:r,toFullView:this.toFullView,loadMore:this.loadMore}),a&&o.a.createElement(P,{imgSrc:t,closeModal:this.closeModal}))}}]),t}(n.Component),q=a(24),L=a.n(q);l.a.render(o.a.createElement(j,{className:L.a.app}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.efbd3f20.chunk.js.map